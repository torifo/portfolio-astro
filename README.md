# Toriforium Portfolio

## æ—¥æœ¬èª

### ğŸ“– æ¦‚è¦

Astroã¨TypeScriptã‚’ä½¿ç”¨ã—ã¦æ§‹ç¯‰ã•ã‚ŒãŸãƒ¢ãƒ€ãƒ³ãªãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªWebã‚µã‚¤ãƒˆã§ã™ã€‚microCMS APIã«ã‚ˆã‚‹å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã€æ—¥ã®å‡ºãƒ»æ—¥æ²¡APIã«ã‚ˆã‚‹è‡ªå‹•ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆã€Astro SSG ã«ã‚ˆã‚‹é«˜é€Ÿãªé™çš„ã‚µã‚¤ãƒˆç”Ÿæˆã‚’ç‰¹å¾´ã¨ã—ã¦ã„ã¾ã™ã€‚ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã¨ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒã‚’åˆ†é›¢ã—ã€ãƒªã‚½ãƒ¼ã‚¹ã«é…æ…®ã—ãŸè¨­è¨ˆã§é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚

### ğŸ› ï¸ ä½¿ç”¨æŠ€è¡“

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Astro (SSG) - é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆã«ã‚ˆã‚‹é«˜é€Ÿé…ä¿¡
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: Tailwind CSS - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®CSS
- **è¨€èª**: TypeScript - å‹å®‰å…¨æ€§ã¨ã‚³ãƒ¼ãƒ‰å“è³ªã®å‘ä¸Š
- **CMS**: microCMS - ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ï¼ˆProfileãƒ»Opus APIï¼‰
- **å¤–éƒ¨API**: Sunrise Sunset API - æ—¥ã®å‡ºãƒ»æ—¥æ²¡æ™‚åˆ»ã«ã‚ˆã‚‹è‡ªå‹•ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ
- **ã‚³ãƒ³ãƒ†ãƒŠåŒ–**: Docker (multi-stage build: node:alpine â†’ nginx:alpine)
- **Webã‚µãƒ¼ãƒãƒ¼**: Nginx - é«˜é€Ÿãªé™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡
- **ãƒ¬ã‚¸ã‚¹ãƒˆãƒª**: GitHub Container Registry (GHCR)

### âœ¨ ç‰¹å¾´

- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³**: ãƒ¢ãƒã‚¤ãƒ«ã‹ã‚‰ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã¾ã§å¯¾å¿œ
- **é«˜é€Ÿãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: Astro SSG ã«ã‚ˆã‚‹æœ€é©åŒ–ã•ã‚ŒãŸé™çš„ã‚µã‚¤ãƒˆ
- **ãƒ¢ãƒ€ãƒ³UI**: ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- **å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„**: microCMS APIã«ã‚ˆã‚‹ãƒ“ãƒ«ãƒ‰æ™‚ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆProfileãƒ»Opusï¼‰
- **å‹•çš„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: `getStaticPaths()` ã«ã‚ˆã‚‹ Opus è©³ç´°ãƒšãƒ¼ã‚¸è‡ªå‹•ç”Ÿæˆ
- **ã‚«ãƒ†ã‚´ãƒª/ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼**: OpusSectionãƒ»AboutSection ã§ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´çµã‚Šè¾¼ã¿
- **è‡ªå‹•ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ**: æ—¥ã®å‡ºãƒ»æ—¥æ²¡æ™‚åˆ»ã«åŸºã¥ããƒ©ã‚¤ãƒˆ/ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ™‚è¨ˆ**: ãƒ˜ãƒƒãƒ€ãƒ¼ã«JSTæ™‚åˆ»ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º
- **ãƒ“ãƒ«ãƒ‰æ™‚åˆ»è¡¨ç¤º**: ãƒ•ãƒƒã‚¿ãƒ¼ã«ãƒ“ãƒ«ãƒ‰æ—¥æ™‚ã‚’è‡ªå‹•åŸ‹ã‚è¾¼ã¿ï¼ˆJSTï¼‰
- **Instagramé€£æº**: Journey ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§æ—…ã®å†™çœŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ãƒªãƒ³ã‚¯

### ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Header.astro          # ãƒ˜ãƒƒãƒ€ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”œâ”€â”€ ThemeToggle.astro     # ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆãƒ»æ™‚åˆ»è¡¨ç¤º
â”‚   â”‚   â”œâ”€â”€ Footer.astro          # ãƒ•ãƒƒã‚¿ãƒ¼ï¼ˆãƒ“ãƒ«ãƒ‰æ™‚åˆ»è‡ªå‹•è¡¨ç¤ºï¼‰
â”‚   â”‚   â”œâ”€â”€ DetailHeader.astro    # Opusè©³ç´°ãƒšãƒ¼ã‚¸ç”¨ãƒ˜ãƒƒãƒ€ãƒ¼
â”‚   â”‚   â”œâ”€â”€ GameSNS.astro         # ã‚²ãƒ¼ãƒ SNSçµ±åˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ sections/
â”‚   â”‚       â”œâ”€â”€ HeroSection.astro     # ãƒ¡ã‚¤ãƒ³ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ï¼ˆProfile APIé€£æºï¼‰
â”‚   â”‚       â”œâ”€â”€ AboutSection.astro    # è‡ªå·±ç´¹ä»‹ãƒ»çµŒæ­´ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆProfile APIé€£æºãƒ»ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼‰
â”‚   â”‚       â”œâ”€â”€ SkillsSection.astro   # æŠ€è¡“ã‚¹ã‚­ãƒ«
â”‚   â”‚       â”œâ”€â”€ OpusSection.astro     # ä½œå“ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆOpus APIé€£æºãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼‰
â”‚   â”‚       â”œâ”€â”€ JourneySection.astro  # æ—¥æœ¬8åœ°æ–¹ãƒ»éƒ½é“åºœçœŒåˆ¥æ—…è¨˜éŒ²
â”‚   â”‚       â””â”€â”€ GamesSection.astro    # ã‚²ãƒ¼ãƒ é–¢é€£
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â””â”€â”€ microcms.ts           # microCMS APIå…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆå‹å®šç¾©ãƒ»fetché–¢æ•°ï¼‰
â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â””â”€â”€ Layout.astro          # åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ index.astro           # ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
â”‚   â”‚   â””â”€â”€ opus/
â”‚   â”‚       â””â”€â”€ [slug].astro      # Opusè©³ç´°ãƒšãƒ¼ã‚¸ï¼ˆgetStaticPathsè‡ªå‹•ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ styles/
â”‚       â””â”€â”€ global.css            # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”œâ”€â”€ public/                       # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ç”»åƒ
â”œâ”€â”€ .github/workflows/            # GitHub Actionsè¨­å®š
â”œâ”€â”€ docker-compose.yml            # Docker Composeè¨­å®š
â”œâ”€â”€ Dockerfile                    # ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰è¨­å®š
â””â”€â”€ nginx.conf                    # Nginxè¨­å®š
```

### ğŸ³ Docker & ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

- **æœ¬ç•ªURL**: `https://portorifo.riumu.net`
- **Dockerã‚¤ãƒ¡ãƒ¼ã‚¸**: `ghcr.io/torifo/portfolio-astro:latest`
- **ãƒ“ãƒ«ãƒ‰æ–¹å¼**: ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ï¼ˆãƒ“ãƒ«ãƒ€ãƒ¼ â†’ Nginx Alpineï¼‰
- **Webã‚µãƒ¼ãƒãƒ¼**: Nginx on Alpine Linux
- **ç’°å¢ƒå¤‰æ•°**: microCMS APIè¨­å®šã‚’ `.env` ã§ç®¡ç†ï¼ˆgitè¿½è·¡å¤–ï¼‰

#### ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼

```
WSL (ãƒ­ãƒ¼ã‚«ãƒ«)
  â””â”€ build-push.sh (*gitignore)
       â”œâ”€ docker build â†’ ghcr.io/torifo/portfolio-astro:{tag}
       â””â”€ docker push â†’ GHCR

VPS (root@162.43.88.107)
  â””â”€ /home/ubuntu/Web/portfolio-astro/
       â””â”€ ./deploy.sh {tag}  â†’  docker pull & docker compose up -d
```

> `build-push.sh` ã¯ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºè€…å°‚ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãŸã‚ `.gitignore` ã«è¨˜è¼‰ã—è¿½è·¡å¤–ã¨ã—ã¦ã„ã¾ã™ã€‚

### ğŸŒŸ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚»ã‚¯ã‚·ãƒ§ãƒ³

| ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | æ¦‚è¦ | ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ |
|-----------|------|------------|
| **Hero** | ãƒ¡ã‚¤ãƒ³ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ»ã‚¿ã‚¤ãƒˆãƒ« | microCMS Profile API |
| **About** | è‡ªå·±ç´¹ä»‹ãƒ»çµŒæ­´ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ»Connect | microCMS Profile APIï¼ˆã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å¯¾å¿œï¼‰|
| **Skills** | æŠ€è¡“ã‚¹ã‚­ãƒ« | é™çš„ãƒ‡ãƒ¼ã‚¿ |
| **Opus** | ä½œå“ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»è©³ç´°ãƒšãƒ¼ã‚¸ | microCMS Opus APIï¼ˆã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å¯¾å¿œï¼‰|
| **Journey** | æ—¥æœ¬8åœ°æ–¹ãƒ»éƒ½é“åºœçœŒåˆ¥æ—…è¨˜éŒ² | é™çš„ãƒ‡ãƒ¼ã‚¿ï¼ˆè¨ªå•æ¸ˆã¿ç®¡ç†ï¼‰|
| **Games** | ã‚²ãƒ¼ãƒ é–¢é€£æƒ…å ± | å¤–éƒ¨API |

### ğŸ”Œ microCMS APIé€£æº

- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `https://portorifo.microcms.io/api/v1/`
- **Profile** (`/profile`): åå‰ãƒ»è‚©æ›¸ããƒ»è‡ªå·±ç´¹ä»‹ãƒ»ã‚¢ãƒã‚¿ãƒ¼ãƒ»ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ»çµŒæ­´ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³
- **Opus** (`/opus?orders=createdAt`): ä½œå“ä¸€è¦§ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ»é–¢é€£ãƒªãƒ³ã‚¯ãƒ»ã‚µãƒ ãƒã‚¤ãƒ«
- å…¨APIå‘¼ã³å‡ºã—ã¯ãƒ“ãƒ«ãƒ‰æ™‚ã®ã¿å®Ÿè¡Œï¼ˆSSGï¼‰â†’ APIã‚­ãƒ¼ã¯æœ€çµ‚HTMLã«å«ã¾ã‚Œãªã„

### âœ… å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

- [x] microCMS Profile APIé€£æºï¼ˆHeroãƒ»Aboutãƒ»Connectï¼‰
- [x] microCMS Opus APIé€£æºï¼ˆä½œå“ä¸€è¦§ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼‰
- [x] Opusè©³ç´°ãƒšãƒ¼ã‚¸è‡ªå‹•ç”Ÿæˆï¼ˆ`/opus/[slug]`ï¼‰
- [x] AboutçµŒæ­´ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆAcademic / Technology / Opus / Pulse / Communityï¼‰
- [x] æ—¥ã®å‡ºãƒ»æ—¥æ²¡APIã«ã‚ˆã‚‹è‡ªå‹•ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ
- [x] Journey 8åœ°æ–¹ãƒ»éƒ½é“åºœçœŒåˆ¥è¨ªå•ç®¡ç†ï¼ˆé™çš„ä»®ãƒ‡ãƒ¼ã‚¿ãƒ»APIé€£æºã¯æœªå®Ÿè£…ï¼‰
- [x] Footerãƒ“ãƒ«ãƒ‰æ™‚åˆ»è‡ªå‹•è¡¨ç¤º
- [x] GHCR Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ç®¡ç†

---

## English

### ğŸ“– Overview

A modern portfolio website built with Astro and TypeScript. Features microCMS API-driven dynamic content, automatic light/dark theme switching via Sunrise-Sunset API, and high-performance static generation with Astro SSG. Build and deployment environments are separated for efficient resource usage.

### ğŸ› ï¸ Tech Stack

- **Framework**: Astro (SSG) - Static site generation for fast delivery
- **Styling**: Tailwind CSS - Utility-first CSS
- **Language**: TypeScript - Type safety and code quality
- **CMS**: microCMS - Headless CMS (Profile & Opus APIs)
- **External API**: Sunrise Sunset API - Auto theme switching
- **Containerization**: Docker (multi-stage: node:alpine â†’ nginx:alpine)
- **Web Server**: Nginx - High-performance static file serving
- **Registry**: GitHub Container Registry (GHCR)

### âœ¨ Features

- **Responsive Design**: Optimized for mobile to desktop
- **High Performance**: Static site generation with Astro SSG
- **Dynamic Content**: Build-time data fetching from microCMS (Profile & Opus)
- **Dynamic Routes**: Auto-generated Opus detail pages via `getStaticPaths()`
- **Filter UI**: Category/tag filters in Opus and About sections
- **Auto Theme**: Light/dark mode based on Tokyo sunrise/sunset times
- **Real-time Clock**: JST time in header
- **Build Timestamp**: Build date auto-embedded in footer

### ğŸ³ Docker & Deployment

- **Production URL**: `https://portorifo.riumu.net`
- **Docker Image**: `ghcr.io/torifo/portfolio-astro:latest`
- **Build**: Multi-stage Docker build (builder â†’ Nginx Alpine)

#### Deployment Flow

```
Local WSL
  â””â”€ build-push.sh (*gitignored)
       â”œâ”€ docker build â†’ ghcr.io/torifo/portfolio-astro:{tag}
       â””â”€ docker push â†’ GHCR

VPS (root@162.43.88.107)
  â””â”€ /home/ubuntu/Web/portfolio-astro/
       â””â”€ ./deploy.sh {tag}  â†’  docker pull & docker compose up -d
```

### ğŸ”Œ microCMS API

- **Base**: `https://portorifo.microcms.io/api/v1/`
- **Profile** (`/profile`): Name, title, introduction, avatar, emails, history timeline
- **Opus** (`/opus?orders=createdAt`): Works, categories, related links, thumbnails
- All API calls run at **build time only** (SSG) â€” API keys are never exposed to browsers
