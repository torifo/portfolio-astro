---
// GameSNS.astro - ゲーム関連SNSセクション専用コンポーネント

interface SNSItem {
  fieldId: string;
  sns: string[];
  link: string;
  icon?: {
    url: string;
    height: number;
    width: number;
  }[];
}

interface Props {
  snsItems: SNSItem[];
  title?: string;
  description?: string;
}

const { snsItems, title = "関連SNS・サイト", description = "ゲーム関連の情報発信やコミュニティ活動" } = Astro.props;

// SNSプラットフォーム別の設定
const snsConfig: Record<string, { name: string; color: string; fallbackIcon: string }> = {
  'Twitter': { 
    name: 'Twitter/X', 
    color: 'from-blue-400 to-blue-600',
    fallbackIcon: 'M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z'
  },
  'Youtube': { 
    name: 'YouTube', 
    color: 'from-red-500 to-red-600',
    fallbackIcon: 'M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z'
  },
  'TikTok': { 
    name: 'TikTok', 
    color: 'from-pink-500 to-purple-600',
    fallbackIcon: 'M19.589 6.686a4.793 4.793 0 0 1-3.77-4.245V2h-3.445v16.672a2.896 2.896 0 0 1-5.201 1.743l-.002-.001a2.895 2.895 0 0 1 2.735-4.028l.001-.002.002.002a2.895 2.895 0 0 1 .398.027l.009-.002V12.8a6.466 6.466 0 0 0-.398-.027l-.009.002a6.4 6.4 0 0 0-6.398 6.4 6.4 6.4 0 0 0 11.2 4.267V8.687a8.168 8.168 0 0 0 4.889 1.616V6.736a4.795 4.795 0 0 1-.9-.05z'
  },
  'HoYoLab': { 
    name: 'HoYoLab', 
    color: 'from-orange-400 to-yellow-500',
    fallbackIcon: 'M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5'
  }
};

// SNS設定を取得する関数
const getSNSConfig = (snsType: string) => {
  return snsConfig[snsType] || { 
    name: snsType, 
    color: 'from-gray-400 to-gray-600',
    fallbackIcon: 'M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14'
  };
};
---

{snsItems.length > 0 && (
  <div class="mt-16">
    <div class="text-center mb-12">
      <h3 class="text-3xl font-bold text-white mb-4 flex items-center justify-center">
        <svg class="w-8 h-8 mr-3 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
        </svg>
        {title}
      </h3>
      <p class="text-gray-400 text-lg">{description}</p>
    </div>
    
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 max-w-4xl mx-auto">
      {snsItems.map((sns) => {
        const snsType = sns.sns[0];
        const config = getSNSConfig(snsType);
        
        return (
          <a 
            href={sns.link} 
            target="_blank" 
            rel="noopener noreferrer"
            class="sns-card glass rounded-2xl p-6 hover-lift group transition-all duration-300 hover:shadow-2xl"
          >
            <div class="flex flex-col items-center text-center space-y-4">
              <!-- アイコン部分 -->
              <div class={`w-16 h-16 bg-gradient-to-br ${config.color} rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`}>
                {sns.icon?.[0] ? (
                  <div class="w-12 h-12 bg-white rounded-xl flex items-center justify-center p-2">
                    <img 
                      src={sns.icon[0].url} 
                      alt={config.name}
                      class="w-full h-full object-contain"
                    />
                  </div>
                ) : (
                  <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d={config.fallbackIcon}></path>
                  </svg>
                )}
              </div>
              
              <!-- SNS名 -->
              <div>
                <h4 class="text-white font-bold text-lg mb-1">{config.name}</h4>
                <p class="text-gray-400 text-sm">ぜひチェックしてね～</p>
              </div>
              
              <!-- 外部リンクアイコン -->
              <div class="flex items-center text-cyan-400 text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                </svg>
                開く
              </div>
            </div>
          </a>
        );
      })}
    </div>
  </div>
)}

<style>
  .sns-card {
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
  }
  
  .sns-card:hover {
    border-color: rgba(34, 211, 238, 0.3);
    background: rgba(255, 255, 255, 0.08);
    transform: translateY(-4px);
  }
  
  .sns-card:hover .group-hover\:scale-110 {
    transform: scale(1.1);
  }
  
  .sns-card:hover .group-hover\:opacity-100 {
    opacity: 1;
  }
</style>